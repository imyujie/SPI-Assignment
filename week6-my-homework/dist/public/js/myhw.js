// Generated by LiveScript 1.3.1
(function(){
  $(function(){
    var dateTimePicker, uploadBtn, updateBtn, filePathBlock, hwModal, identityBtn, identityInput, loginForm, loginBtn, registerBtn, username, password, signupSubmitBtn, assignFormSubmitBtn, assignForm, uploadForm, homeworkSubmitBtn, datetimeinput, modalFormSubmitBtn, modalForm, deadlineDate, scoreForm, updateAssignmentBtn;
    dateTimePicker = $('#datetimepicker');
    uploadBtn = $('.myhw-upload');
    updateBtn = $('.update-deadline');
    filePathBlock = $('.file-path');
    hwModal = $('.modal');
    dateTimePicker.datetimepicker({
      lang: 'ch'
    });
    uploadBtn.on('change', function(){
      filePathBlock.val($(this).val());
    });
    updateBtn.on('click', function(){
      console.log('hehe');
      hwModal.modal('show');
    });
    identityBtn = $('.myhw-identity .button');
    identityInput = $('#identity');
    identityBtn.on('click', function(){
      var thisBtn, valu;
      thisBtn = $(this);
      identityBtn.removeClass('positive');
      thisBtn.addClass('positive');
      valu = thisBtn.attr('id') === 'student' ? 0 : 1;
      identityInput.val(valu);
    });
    loginForm = $('#login-form');
    loginBtn = $('.login-btn');
    registerBtn = $('.myhw-register');
    username = $('[name="username"]');
    password = $('[name="password"]');
    loginBtn.on('click', function(){
      if (username.val() && password.val()) {
        loginForm.submit();
      }
    });
    registerBtn.on('click', function(){
      window.location = '/signup';
    });
    signupSubmitBtn = $('#myhw-submit');
    signupSubmitBtn.on('click', function(){
      $('.myhw-register-form').submit();
    });
    assignFormSubmitBtn = $('.assign-form-submit');
    assignForm = $('.assign-form');
    assignFormSubmitBtn.on('click', function(){
      assignForm.submit();
    });
    uploadForm = $('.upload-homework-form');
    homeworkSubmitBtn = $('.homework-submit-btn');
    homeworkSubmitBtn.on('click', function(){
      uploadForm.submit();
    });
    datetimeinput = $('.modal #datetimepicker');
    modalFormSubmitBtn = $('.modal-form-submit');
    modalForm = $('.modal-form');
    deadlineDate = $('.deadline-date');
    modalFormSubmitBtn.on('click', function(){
      $.post('/modify', modalForm.serialize(), function(data){
        if (data === '1') {
          console.log('error');
        } else {
          deadlineDate.text(data);
        }
      });
    });
    scoreForm = $('.score-form');
    scoreForm.on('submit', function(e){
      var thisForm, scoreInput, valu;
      e.preventDefault();
      thisForm = $(this);
      scoreInput = thisForm.find('.score-input');
      valu = scoreInput.val();
      console.log(valu);
      if (!valu) {
        return;
      }
      $.post('/score', thisForm.serialize(), function(data){
        scoreInput.val(valu);
      });
    });
    updateAssignmentBtn = $('.update-assignment');
    updateAssignmentBtn.on('click', function(){
      window.location = $(this).attr('data-href');
    });
  });
}).call(this);
